# 特殊消息类型测试清单

## Phase 1 功能测试

### 1. 数据库升级测试 ✓
- [x] 数据库从版本7升级到版本8 
- [x] 现有消息自动添加 type: 'text'
- [x] 新的type字段索引正常工作

### 2. 消息发送测试
- [ ] 文本消息发送（保持向后兼容）
- [ ] 语音消息发送
- [ ] 图片消息发送
- [ ] 转账消息发送

### 3. AI回复解析测试
需要AI回复以下格式进行测试：
```json
["普通文本消息"]
[{"type": "voice", "content": "语音内容"}]
[{"type": "transfer", "amount": 100, "note": "给你的"}]
["文本", {"type": "voice", "content": "语音"}, {"type": "transfer", "amount": 50, "note": "买咖啡"}]
```

### 4. 消息渲染测试
- [ ] 文本消息正常显示
- [ ] 语音消息显示波形动画和时长
- [ ] 图片消息正常显示和点击放大
- [ ] 转账消息显示金额卡片
- [ ] 撤回消息显示系统提示
- [ ] 表情包消息正常显示

### 5. 交互功能测试
- [ ] 点击语音消息查看内容
- [ ] 点击图片查看大图
- [ ] 用户输入工具栏功能
- [ ] 语音消息发送弹窗
- [ ] 转账发送弹窗
- [ ] 图片选择和上传

### 6. 聊天列表测试
- [ ] 最后消息正确显示消息类型标签
- [ ] 特殊消息在列表中显示为 [语音]、[图片]、[转账] 等

### 7. 群聊测试
- [ ] 群聊中发送特殊消息
- [ ] AI在群聊中回复特殊消息
- [ ] 群聊消息显示发送者名称

### 8. 兼容性测试
- [ ] 现有聊天记录正常显示
- [ ] 新老消息混合显示正常
- [ ] 数据导入导出功能正常

## 测试AI提示词

可以向AI发送以下内容来测试特殊消息：

1. "给我发个语音消息"
2. "转账100块钱给我"  
3. "发一张图片"
4. "撤回刚才说的话"
5. "发个表情"

## 已知问题和待改进

1. AI图片生成功能未实现（按设计不需要）
2. 表情包功能需要预设表情库
3. 消息删除和编辑功能待开发（Phase 2）
4. 消息转发功能待开发（Phase 2）